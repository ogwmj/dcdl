<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DC: Dark Legion - API Documentation</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Roboto+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
        }
        .mono {
            font-family: 'Roboto Mono', monospace;
        }
        /* Simple syntax highlighting for JSON */
        .json-key { color: #9b59b6; } /* purple */
        .json-string { color: #2ecc71; } /* green */
        .json-number { color: #e67e22; } /* orange */
        .json-boolean { color: #3498db; } /* blue */
        .json-null { color: #c0392b; } /* red */

        /* Scrollbar styling */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #1f2937;
        }
        ::-webkit-scrollbar-thumb {
            background: #4b5563;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #6b7280;
        }
    </style>
</head>
<body class="bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-gray-200">

    <div class="container mx-auto p-4 md:p-8">
        <header class="mb-12 text-center">
            <h1 class="text-4xl md:text-5xl font-bold text-gray-900 dark:text-white">DCDL Companion API</h1>
            <p class="mt-4 text-lg text-gray-600 dark:text-gray-400">Welcome to the official API documentation for the DCDL Companion site.</p>
        </header>

        <main>
            <!-- Endpoint 1: Champions -->
            <section id="champions" class="mb-16 p-6 bg-white dark:bg-gray-800 rounded-xl shadow-md">
                <h2 class="text-2xl font-bold mb-4 text-gray-900 dark:text-white">Champions</h2>
                <p class="mb-6 text-gray-600 dark:text-gray-400">This endpoint returns a list of all champions, including their rarity, class, synergies, and skills.</p>
                
                <div class="flex items-center space-x-4 mb-6">
                    <span class="text-sm font-semibold inline-flex items-center px-3 py-1 rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-green-300">GET</span>
                    <code class="text-sm md:text-base p-2 bg-gray-100 dark:bg-gray-700 rounded-md text-gray-700 dark:text-gray-300 mono">https://dcdl-companion/api/champions.json</code>
                </div>

                <div class="grid md:grid-cols-2 gap-8">
                    <div>
                        <h3 class="text-xl font-semibold mb-4 text-gray-900 dark:text-white">Response Schema</h3>
                        <div class="space-y-3 text-sm">
                            <p><code class="mono font-semibold">name</code>: <span class="text-gray-500 dark:text-gray-400">String</span> - The name of the champion.</p>
                            <p><code class="mono font-semibold">baseRarity</code>: <span class="text-gray-500 dark:text-gray-400">String</span> - The rarity of the champion (e.g., "Legendary", "Mythic").</p>
                            <p><code class="mono font-semibold">class</code>: <span class="text-gray-500 dark:text-gray-400">String</span> - The champion's class (e.g., "Warrior").</p>
                            <p><code class="mono font-semibold">inherentSynergies</code>: <span class="text-gray-500 dark:text-gray-400">Array[String]</span> - A list of the champion's synergies.</p>
                            <p><code class="mono font-semibold">isHealer</code>: <span class="text-gray-500 dark:text-gray-400">Boolean</span> - Indicates if the champion has healing abilities.</p>
                            <p><code class="mono font-semibold">cardImageUrl</code>: <span class="text-gray-500 dark:text-gray-400">String</span> - URL for the champion's card image.</p>
                            <p><code class="mono font-semibold">skills</code>: <span class="text-gray-500 dark:text-gray-400">Array[Object]</span> - Details of the champion's skills.</p>
                            <p class="ml-4"><code class="mono font-semibold">name</code>: <span class="text-gray-500 dark:text-gray-400">String</span> - The skill's name.</p>
                            <p class="ml-4"><code class="mono font-semibold">description</code>: <span class="text-gray-500 dark:text-gray-400">String</span> - Description of the skill.</p>
                            <p class="ml-4"><code class="mono font-semibold">type</code>: <span class="text-gray-500 dark:text-gray-400">String</span> - The type of skill (e.g., "Defense", "Physical").</p>
                            <p class="ml-4"><code class="mono font-semibold">effects</code>: <span class="text-gray-500 dark:text-gray-400">Array[String]</span> - List of effects the skill applies.</p>
                            <p class="ml-4"><code class="mono font-semibold">isUltimate</code>: <span class="text-gray-500 dark:text-gray-400">Boolean</span> - Whether the skill is an ultimate.</p>
                        </div>
                    </div>
                    <div>
                        <h3 class="text-xl font-semibold mb-4 text-gray-900 dark:text-white">Example Response</h3>
                        <pre class="bg-gray-900 text-white p-4 rounded-lg text-xs overflow-x-auto h-96"><code id="champions-json-example" class="mono">Loading...</code></pre>
                    </div>
                </div>
            </section>

            <!-- Endpoint 2: Synergies -->
            <section id="synergies" class="mb-16 p-6 bg-white dark:bg-gray-800 rounded-xl shadow-md">
                <h2 class="text-2xl font-bold mb-4 text-gray-900 dark:text-white">Synergies</h2>
                <p class="mb-6 text-gray-600 dark:text-gray-400">This endpoint provides details about all synergies (factions/classes), including their descriptions and tiered bonuses.</p>

                <div class="flex items-center space-x-4 mb-6">
                    <span class="text-sm font-semibold inline-flex items-center px-3 py-1 rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-green-300">GET</span>
                    <code class="text-sm md:text-base p-2 bg-gray-100 dark:bg-gray-700 rounded-md text-gray-700 dark:text-gray-300 mono">https://dcdl-companion/api/synergies.json</code>
                </div>

                <div class="grid md:grid-cols-2 gap-8">
                    <div>
                        <h3 class="text-xl font-semibold mb-4 text-gray-900 dark:text-white">Response Schema</h3>
                        <div class="space-y-3 text-sm">
                            <p><code class="mono font-semibold">name</code>: <span class="text-gray-500 dark:text-gray-400">String</span> - The display name of the synergy.</p>
                            <p><code class="mono font-semibold">description</code>: <span class="text-gray-500 dark:text-gray-400">String</span> - A description of the synergy's overall effect.</p>
                            <p><code class="mono font-semibold">factionImageUrl</code>: <span class="text-gray-500 dark:text-gray-400">String</span> - URL for the synergy's icon.</p>
                            <p><code class="mono font-semibold">tiers</code>: <span class="text-gray-500 dark:text-gray-400">Array[Object]</span> - A list of bonuses granted at different levels.</p>
                            <p class="ml-4"><code class="mono font-semibold">countRequired</code>: <span class="text-gray-500 dark:text-gray-400">Number</span> - The number of champions needed for the bonus.</p>
                            <p class="ml-4"><code class="mono font-semibold">tierDescription</code>: <span class="text-gray-500 dark:text-gray-400">String</span> - The description of the bonus effect for that tier.</p>
                        </div>
                    </div>
                    <div>
                        <h3 class="text-xl font-semibold mb-4 text-gray-900 dark:text-white">Example Response</h3>
                        <pre class="bg-gray-900 text-white p-4 rounded-lg text-xs overflow-x-auto h-96"><code id="synergies-json-example" class="mono">Loading...</code></pre>
                    </div>
                </div>
            </section>

            <!-- Endpoint 3: Effects -->
            <section id="effects" class="p-6 bg-white dark:bg-gray-800 rounded-xl shadow-md">
                <h2 class="text-2xl font-bold mb-4 text-gray-900 dark:text-white">Effects</h2>
                <p class="mb-6 text-gray-600 dark:text-gray-400">This endpoint lists all possible status effects and keywords found in skill descriptions.</p>

                <div class="flex items-center space-x-4 mb-6">
                    <span class="text-sm font-semibold inline-flex items-center px-3 py-1 rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-green-300">GET</span>
                    <code class="text-sm md:text-base p-2 bg-gray-100 dark:bg-gray-700 rounded-md text-gray-700 dark:text-gray-300 mono">https://dcdl-companion/api/effects.json</code>
                </div>

                <div class="grid md:grid-cols-2 gap-8">
                    <div>
                        <h3 class="text-xl font-semibold mb-4 text-gray-900 dark:text-white">Response Schema</h3>
                        <div class="space-y-3 text-sm">
                            <p><code class="mono font-semibold">name</code>: <span class="text-gray-500 dark:text-gray-400">String</span> - The name of the effect (e.g., "Stunning", "Ivy Thorn").</p>
                            <p><code class="mono font-semibold">description</code>: <span class="text-gray-500 dark:text-gray-400">String</span> - A detailed description of what the effect does.</p>
                        </div>
                    </div>
                    <div>
                        <h3 class="text-xl font-semibold mb-4 text-gray-900 dark:text-white">Example Response</h3>
                        <pre class="bg-gray-900 text-white p-4 rounded-lg text-xs overflow-x-auto h-96"><code id="effects-json-example" class="mono">Loading...</code></pre>
                    </div>
                </div>
            </section>
        </main>

        <footer class="text-center mt-16 text-gray-500 dark:text-gray-400 text-sm">
            <p>API Documentation built with Tailwind CSS.</p>
        </footer>
    </div>

    <script>
        // Function to fetch JSON from a local file, format it, and display it
        async function fetchAndDisplayJSON(filePath, elementId, dataKey) {
            try {
                // Fetch the local JSON file.
                const response = await fetch(filePath);
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                // The response is the JSON data itself.
                const jsonData = await response.json();

                // Access the correct part of the JSON data using the provided key
                const dataArray = jsonData[dataKey] || [];

                // Take the first item for the example
                const exampleData = dataArray.length > 0 ? dataArray[0] : { "message": "No data available in this structure." };
                
                let formattedJson = JSON.stringify(exampleData, null, 2);

                // Apply simple syntax highlighting
                formattedJson = formattedJson.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?)/g, (match) => {
                    let cls = 'json-key';
                    if (/:$/.test(match)) {
                        cls = 'json-key';
                    } else {
                        cls = 'json-string';
                    }
                    return `<span class="${cls}">${match}</span>`;
                });
                formattedJson = formattedJson.replace(/\b(\d+(\.\d+)?)\b/g, '<span class="json-number">$1</span>');
                formattedJson = formattedJson.replace(/\b(true|false)\b/g, '<span class="json-boolean">$1</span>');
                formattedJson = formattedJson.replace(/\b(null)\b/g, '<span class="json-null">$1</span>');


                document.getElementById(elementId).innerHTML = formattedJson;
            } catch (error) {
                document.getElementById(elementId).innerText = `Failed to load local file: ${error.message}\n\nMake sure the file '${filePath}' is in the same directory as this HTML file.`;
                console.error(`Error fetching local file ${filePath}`, error);
            }
        }

        // Fetch data for all endpoints on page load
        document.addEventListener('DOMContentLoaded', () => {
            fetchAndDisplayJSON('./champions.json', 'champions-json-example', 'champions');
            fetchAndDisplayJSON('./synergies.json', 'synergies-json-example', 'synergies');
            fetchAndDisplayJSON('./effects.json', 'effects-json-example', 'effects'); 
        });
    </script>

</body>
</html>
